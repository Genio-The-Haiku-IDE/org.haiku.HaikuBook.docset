<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>
	<meta name="generator" content="Doxygen 1.12.0"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>The Haiku Book: BPrivate::Network::BHttpSession Class Reference</title>
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen.css" rel="stylesheet" type="text/css" />
	<link href="book.css" rel="stylesheet" type="text/css"/>
	</head>
<body>
	<div id="banner">
		<div class="logo">
			<span class="subtitle">
				API Documentation
			</span>
		</div>
	</div>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceBPrivate.html">BPrivate</a></li><li class="navelem"><a class="el" href="namespaceBPrivate_1_1Network.html">Network</a></li><li class="navelem"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classBPrivate_1_1Network_1_1BHttpSession-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BPrivate::Network::BHttpSession Class Reference<div class="ingroups"><a class="el" href="group__netservices.html">Experimental Network Services Support</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Schedule, execute and manage HTTP requests.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3985a2419f61d848d76cc091414f72da" id="r_a3985a2419f61d848d76cc091414f72da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3985a2419f61d848d76cc091414f72da">BHttpSession</a> ()</td></tr>
<tr class="memdesc:a3985a2419f61d848d76cc091414f72da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new object.  <br /></td></tr>
<tr class="separator:a3985a2419f61d848d76cc091414f72da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefa20d6a6b0ef89dc9bd091ad3c02c8" id="r_afefa20d6a6b0ef89dc9bd091ad3c02c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afefa20d6a6b0ef89dc9bd091ad3c02c8">BHttpSession</a> (<a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;&amp;) noexcept=delete</td></tr>
<tr class="memdesc:afefa20d6a6b0ef89dc9bd091ad3c02c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move is disabled.  <br /></td></tr>
<tr class="separator:afefa20d6a6b0ef89dc9bd091ad3c02c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0e71239d098a1088b7362b705918f81" id="r_ac0e71239d098a1088b7362b705918f81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0e71239d098a1088b7362b705918f81">BHttpSession</a> (const <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;) noexcept</td></tr>
<tr class="memdesc:ac0e71239d098a1088b7362b705918f81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html" title="Schedule, execute and manage HTTP requests.">BHttpSession</a> object that shares a state with another.  <br /></td></tr>
<tr class="separator:ac0e71239d098a1088b7362b705918f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b11bb0aa92564bdea568757395ccbbf" id="r_a7b11bb0aa92564bdea568757395ccbbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b11bb0aa92564bdea568757395ccbbf">~BHttpSession</a> () noexcept</td></tr>
<tr class="memdesc:a7b11bb0aa92564bdea568757395ccbbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <br /></td></tr>
<tr class="separator:a7b11bb0aa92564bdea568757395ccbbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eff1630ceb2d7f22654dd8bbe9a5c10" id="r_a4eff1630ceb2d7f22654dd8bbe9a5c10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4eff1630ceb2d7f22654dd8bbe9a5c10">Cancel</a> (const <a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html">BHttpResult</a> &amp;request)</td></tr>
<tr class="memdesc:a4eff1630ceb2d7f22654dd8bbe9a5c10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel a running <em>request</em>.  <br /></td></tr>
<tr class="separator:a4eff1630ceb2d7f22654dd8bbe9a5c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accde0fa55308b63b41e661df47b423da" id="r_accde0fa55308b63b41e661df47b423da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#accde0fa55308b63b41e661df47b423da">Cancel</a> (<a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a> identifier)</td></tr>
<tr class="memdesc:accde0fa55308b63b41e661df47b423da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel a running request.  <br /></td></tr>
<tr class="separator:accde0fa55308b63b41e661df47b423da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14a7c52aaddfd69e22be4a8aeff727f" id="r_ae14a7c52aaddfd69e22be4a8aeff727f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html">BHttpResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae14a7c52aaddfd69e22be4a8aeff727f">Execute</a> (<a class="el" href="classBPrivate_1_1Network_1_1BHttpRequest.html">BHttpRequest</a> &amp;&amp;request, <a class="el" href="classBPrivate_1_1Network_1_1BBorrow.html">BBorrow</a>&lt; <a class="el" href="classBDataIO.html">BDataIO</a> &gt; target=nullptr, <a class="el" href="classBMessenger.html">BMessenger</a> observer=<a class="el" href="classBMessenger.html">BMessenger</a>())</td></tr>
<tr class="memdesc:ae14a7c52aaddfd69e22be4a8aeff727f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule and execute a <em>request</em>.  <br /></td></tr>
<tr class="separator:ae14a7c52aaddfd69e22be4a8aeff727f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b44dbc7966ed58ad903768e13b37c55" id="r_a9b44dbc7966ed58ad903768e13b37c55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b44dbc7966ed58ad903768e13b37c55">operator=</a> (<a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;&amp;) noexcept=delete</td></tr>
<tr class="memdesc:a9b44dbc7966ed58ad903768e13b37c55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move is disabled.  <br /></td></tr>
<tr class="separator:a9b44dbc7966ed58ad903768e13b37c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096712cf5ee1b7b4f3d752030d9bfd42" id="r_a096712cf5ee1b7b4f3d752030d9bfd42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a096712cf5ee1b7b4f3d752030d9bfd42">operator=</a> (const <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;) noexcept</td></tr>
<tr class="memdesc:a096712cf5ee1b7b4f3d752030d9bfd42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy and use the shared state from another session.  <br /></td></tr>
<tr class="separator:a096712cf5ee1b7b4f3d752030d9bfd42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24751671e7b5665d62241d3f968f9098" id="r_a24751671e7b5665d62241d3f968f9098"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24751671e7b5665d62241d3f968f9098">SetMaxConnectionsPerHost</a> (size_t maxConnections)</td></tr>
<tr class="memdesc:a24751671e7b5665d62241d3f968f9098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum number of connections per host.  <br /></td></tr>
<tr class="separator:a24751671e7b5665d62241d3f968f9098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46fbd98c452c1d3b97db93b8ddff81f6" id="r_a46fbd98c452c1d3b97db93b8ddff81f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46fbd98c452c1d3b97db93b8ddff81f6">SetMaxHosts</a> (size_t maxConnections)</td></tr>
<tr class="memdesc:a46fbd98c452c1d3b97db93b8ddff81f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum number of concurrent hosts that can be connected to.  <br /></td></tr>
<tr class="separator:a46fbd98c452c1d3b97db93b8ddff81f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Schedule, execute and manage HTTP requests. </p>
<p>All requests start from a `BHttpSession`. This class has the following jobs:</p><ul>
<li>Store data used between various HTTP calls<ul>
<li>Proxies</li>
<li>Cookies</li>
<li>Additional SSL certificates</li>
<li>Authentication Data</li>
</ul>
</li>
<li>Manage the scheduling and execution of HTTP requests.</li>
</ul>
<p>Objects of the `BHttpSession` class can be shared between different parts of the application. They should be copied, rather than shared using pointers. This is because they have an inner state that is shared between the various objects.</p>
<div class="fragment"><div class="line"><span class="comment">// Creating and sharing a session</span></div>
<div class="line"><span class="keyword">auto</span> session = <a class="code hl_function" href="#a3985a2419f61d848d76cc091414f72da">BHttpSession</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// A copy is passed to window1 and window2, which share the same session data</span></div>
<div class="line"><span class="keyword">auto</span> window1 = <span class="keyword">new</span> WindowWithSession(session);</div>
<div class="line"><span class="keyword">auto</span> window2 = <span class="keyword">new</span> WindowWithSession(session);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add a cookie to the session, this cookie will be used in window1 and window2</span></div>
<div class="line">BNetworkCookie cookie(<span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>, <a class="code hl_class" href="classBUrl.html">BUrl</a>(<span class="stringliteral">&quot;https://example.com/&quot;</span>));</div>
<div class="line">session.AddCookie(std::move(cookie));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The session data persists, even if the original session goes out of scope</span></div>
<div class="ttc" id="aclassBPrivate_1_1Network_1_1BHttpSession_html_a3985a2419f61d848d76cc091414f72da"><div class="ttname"><a name="//apple_ref/cpp/Method/BHttpSession" class="dashAnchor">&nbsp;</a><a href="#a3985a2419f61d848d76cc091414f72da">BPrivate::Network::BHttpSession::BHttpSession</a></div><div class="ttdeci">BHttpSession()</div><div class="ttdoc">Construct a new object.</div></div>
<div class="ttc" id="aclassBUrl_html"><div class="ttname"><a href="classBUrl.html">BUrl</a></div><div class="ttdoc">Represents and manipulates an URL (Uniform Resource Locator).</div><div class="ttdef"><b>Definition</b> Url.h:15</div></div>
</div><!-- fragment --><p>There are specific scenarios for having more than one session, most notably if an application provides services over HTTP whereby a user is identified by cookies, and the application wants to support more than one user account. But in most cases, there will be one instance of the <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html" title="Schedule, execute and manage HTTP requests.">BHttpSession</a> that is shared between various segments of the application.</p>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3985a2419f61d848d76cc091414f72da" name="a3985a2419f61d848d76cc091414f72da"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/BHttpSession" class="dashAnchor">&nbsp;</a><a href="#a3985a2419f61d848d76cc091414f72da">&#9670;&#160;</a></span>BHttpSession() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BPrivate::Network::BHttpSession::BHttpSession </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new object. </p>
<p>Each newly constructed object will have their own queue for HTTP requests, as well as their own cookies and certificate store.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::bad_alloc</td><td>Unable to allocate resources for the object. </td></tr>
    <tr><td class="paramname"><a class="el" href="classBPrivate_1_1Network_1_1BRuntimeError.html" title="Advanced error object for runtime errors.">BRuntimeError</a></td><td>Unable to create semaphores or threads.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="ac0e71239d098a1088b7362b705918f81" name="ac0e71239d098a1088b7362b705918f81"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/BHttpSession" class="dashAnchor">&nbsp;</a><a href="#ac0e71239d098a1088b7362b705918f81">&#9670;&#160;</a></span>BHttpSession() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BPrivate::Network::BHttpSession::BHttpSession </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html" title="Schedule, execute and manage HTTP requests.">BHttpSession</a> object that shares a state with another. </p>
<p>The internal HTTP queue and context can be shared among multiple objects. You can use the copy constructor to create a new object.</p>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="afefa20d6a6b0ef89dc9bd091ad3c02c8" name="afefa20d6a6b0ef89dc9bd091ad3c02c8"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/BHttpSession" class="dashAnchor">&nbsp;</a><a href="#afefa20d6a6b0ef89dc9bd091ad3c02c8">&#9670;&#160;</a></span>BHttpSession() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BPrivate::Network::BHttpSession::BHttpSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move is disabled. </p>
<p><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html" title="Schedule, execute and manage HTTP requests.">BHttpSession</a> objects cannot be moved. Because it has a shared internal state, making copies is cheap and it is the only supported method of creating multiple scoped objects with a shared lifetime.</p>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="a7b11bb0aa92564bdea568757395ccbbf" name="a7b11bb0aa92564bdea568757395ccbbf"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/~BHttpSession" class="dashAnchor">&nbsp;</a><a href="#a7b11bb0aa92564bdea568757395ccbbf">&#9670;&#160;</a></span>~BHttpSession()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BPrivate::Network::BHttpSession::~BHttpSession </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p>The destructor releases the shared internal state of the session object. If there are no more sessions using the shared state, the state is cleaned up.</p>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4eff1630ceb2d7f22654dd8bbe9a5c10" name="a4eff1630ceb2d7f22654dd8bbe9a5c10"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/Cancel" class="dashAnchor">&nbsp;</a><a href="#a4eff1630ceb2d7f22654dd8bbe9a5c10">&#9670;&#160;</a></span>Cancel() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BPrivate::Network::BHttpSession::Cancel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html">BHttpResult</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel a running <em>request</em>. </p>
<p>See the <a class="el" href="#accde0fa55308b63b41e661df47b423da">BHttpSession::Cancel(int32 identifier)</a> method for more details on how this method works.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::bad_alloc</td><td>Error in case memory cannot be allocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="accde0fa55308b63b41e661df47b423da" name="accde0fa55308b63b41e661df47b423da"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/Cancel" class="dashAnchor">&nbsp;</a><a href="#accde0fa55308b63b41e661df47b423da">&#9670;&#160;</a></span>Cancel() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BPrivate::Network::BHttpSession::Cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a></td>          <td class="paramname"><span class="paramname"><em>identifier</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel a running request. </p>
<p>When a request that is scheduled or running is cancelled, its <a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html">BHttpResult</a> object will be set to the <a class="el" href="classBPrivate_1_1Network_1_1BNetworkRequestError.html">BNetworkRequestError</a> exception with the <code>Cancelled</code> type.</p>
<p>There are three possible outcomes: 1. If the request is not yet scheduled, then it will never start. The result will be set to the cancelled error state. 2. If the request was started, then processing it will be terminated. The result will be set to the cancelled error state. 3. If the request was already finished, then nothing happens. The result will keep the value it had assigned. The same if the request identifier is invalid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>The identifier for the request to cancel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::bad_alloc</td><td>Error in case memory cannot be allocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="ae14a7c52aaddfd69e22be4a8aeff727f" name="ae14a7c52aaddfd69e22be4a8aeff727f"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/Execute" class="dashAnchor">&nbsp;</a><a href="#ae14a7c52aaddfd69e22be4a8aeff727f">&#9670;&#160;</a></span>Execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html">BHttpResult</a> BPrivate::Network::BHttpSession::Execute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBPrivate_1_1Network_1_1BHttpRequest.html">BHttpRequest</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBPrivate_1_1Network_1_1BBorrow.html">BBorrow</a>&lt; <a class="el" href="classBDataIO.html">BDataIO</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>target</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBMessenger.html">BMessenger</a></td>          <td class="paramname"><span class="paramname"><em>observer</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="classBMessenger.html">BMessenger</a>()</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule and execute a <em>request</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>The (valid) request to move from. </td></tr>
    <tr><td class="paramname">target</td><td>An optional data buffer to write the incoming body of the request to. This can be <code>nullptr</code> if you want to use the default internal storage. If you provide a buffer, it must be wrapped in a <a class="el" href="classBPrivate_1_1Network_1_1BBorrow.html">BBorrow</a> object. This means that you exclusively borrow the target to this session object. After the request is finished, you can regain usage of the object through the matching <a class="el" href="classBPrivate_1_1Network_1_1BExclusiveBorrow.html">BExclusiveBorrow</a> object. Use the <a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html#adeef8669a4d6f0fcbbbc2766072a8519">BHttpResult::Body()</a> method to synchronize when the target is available again. </td></tr>
    <tr><td class="paramname">observer</td><td>An optional observer that will receive the progress and status messages for this request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classBPrivate_1_1Network_1_1BHttpResult.html">BHttpResult</a> object that corresponds to this request, and that can be used to monitor the progress.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="a9b44dbc7966ed58ad903768e13b37c55" name="a9b44dbc7966ed58ad903768e13b37c55"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/operator=" class="dashAnchor">&nbsp;</a><a href="#a9b44dbc7966ed58ad903768e13b37c55">&#9670;&#160;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp; BPrivate::Network::BHttpSession::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move is disabled. </p>
<p><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html" title="Schedule, execute and manage HTTP requests.">BHttpSession</a> objects cannot be moved. Because it has a shared internal state, making copies is cheap and it is the only supported method of creating multiple scoped objects with a shared lifetime.</p>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="a096712cf5ee1b7b4f3d752030d9bfd42" name="a096712cf5ee1b7b4f3d752030d9bfd42"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/operator=" class="dashAnchor">&nbsp;</a><a href="#a096712cf5ee1b7b4f3d752030d9bfd42">&#9670;&#160;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp; BPrivate::Network::BHttpSession::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy and use the shared state from another session. </p>
<p>The internal HTTP queue and context can be shared among multiple objects. You can use the copy constructor to create a new copy.</p>
<p>This copy assignment operator should be used in very specific instances only, where there is a particular reason to replace an existing session internal session with another. It should not be used in the following case:</p>
<div class="fragment"><div class="line"><span class="comment">// Bad example</span></div>
<div class="line"><a class="code hl_class" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> session1 = <a class="code hl_function" href="#a3985a2419f61d848d76cc091414f72da">BHttpSession</a>();</div>
<div class="line">    <span class="comment">// Creates a new session, including an entirely new (expensive) state</span></div>
<div class="line"><a class="code hl_class" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> session2 = <a class="code hl_function" href="#a3985a2419f61d848d76cc091414f72da">BHttpSession</a>();</div>
<div class="line">    <span class="comment">// Creates another new session, including internal state</span></div>
<div class="line">session2 = session1;</div>
<div class="line">    <span class="comment">// At this stage, the internal state of session2 would</span></div>
<div class="line">    <span class="comment">// have to be cleaned up just after it was created.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Instead do this</span></div>
<div class="line"><a class="code hl_class" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> session1 = <a class="code hl_function" href="#a3985a2419f61d848d76cc091414f72da">BHttpSession</a>();</div>
<div class="line"><a class="code hl_class" href="classBPrivate_1_1Network_1_1BHttpSession.html">BHttpSession</a> session2(session1);</div>
<div class="line">    <span class="comment">// Now session2 directly shares the state with session 1</span></div>
<div class="ttc" id="aclassBPrivate_1_1Network_1_1BHttpSession_html"><div class="ttname"><a href="classBPrivate_1_1Network_1_1BHttpSession.html">BPrivate::Network::BHttpSession</a></div><div class="ttdoc">Schedule, execute and manage HTTP requests.</div><div class="ttdef"><b>Definition</b> HttpSession.h:26</div></div>
</div><!-- fragment --><dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="a24751671e7b5665d62241d3f968f9098" name="a24751671e7b5665d62241d3f968f9098"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/SetMaxConnectionsPerHost" class="dashAnchor">&nbsp;</a><a href="#a24751671e7b5665d62241d3f968f9098">&#9670;&#160;</a></span>SetMaxConnectionsPerHost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BPrivate::Network::BHttpSession::SetMaxConnectionsPerHost </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>maxConnections</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the maximum number of connections per host. </p>
<p>A host is identified by the domain name and the port. You can limit the number of concurrent connections to a host by tweaking this value.</p>
<p>The default value is 2 connections per host.</p>
<p>If the value is decreased, any requests that already started will not be affected. The new value will only be applied when any new requests are added.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxConnections</td><td>The maximum number of connections per host. This value must between 1 and <code>INT32_MAX</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classBPrivate_1_1Network_1_1BRuntimeError.html" title="Advanced error object for runtime errors.">BRuntimeError</a></td><td>In case the <em>maxConnections</em> is invalid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
<a id="a46fbd98c452c1d3b97db93b8ddff81f6" name="a46fbd98c452c1d3b97db93b8ddff81f6"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/SetMaxHosts" class="dashAnchor">&nbsp;</a><a href="#a46fbd98c452c1d3b97db93b8ddff81f6">&#9670;&#160;</a></span>SetMaxHosts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BPrivate::Network::BHttpSession::SetMaxHosts </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>maxConnections</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the maximum number of concurrent hosts that can be connected to. </p>
<p>A host is identified by the domain name and the port. You can limit the number of concurrent hosts by tweaking this value.</p>
<p>The default value is 10 concurrent hosts.</p>
<p>If the value is decreased, any requests that already started will not be affected. The new value will only be applied when any new requests are added.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxConnections</td><td>The maximum number of hosts. The value must be at least 1.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classBPrivate_1_1Network_1_1BRuntimeError.html" title="Advanced error object for runtime errors.">BRuntimeError</a></td><td>In case the <em>maxConnections</em> is 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>Haiku R1 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
  <hr class="footer"/><address class="footer"><small>
    The Haiku Book pre-R1 - BPrivate::Network::BHttpSession Class Reference<br />
    Generated on Sat May 24 2025 23:12:20 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.12.0
  </small></address>
</body>
</html>
