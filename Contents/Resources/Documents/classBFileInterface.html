<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>
	<meta name="generator" content="Doxygen 1.12.0"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>The Haiku Book: BFileInterface Class Reference</title>
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen.css" rel="stylesheet" type="text/css" />
	<link href="book.css" rel="stylesheet" type="text/css"/>
	</head>
<body>
	<div id="banner">
		<div class="logo">
			<span class="subtitle">
				API Documentation
			</span>
		</div>
	</div>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classBFileInterface-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BFileInterface Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group__media.html">Media Kit</a> &#124; <a class="el" href="group__libbe.html">(libbe.so)</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>A node that can read and write data to a file on disk.  
 <a href="#details">More...</a></p>

<p>Inherits <a class="el" href="classBMediaNode.html">BMediaNode</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ae3a5749bb67df08ad3e50132a572ebb4" id="r_ae3a5749bb67df08ad3e50132a572ebb4"><td class="memItemLeft" align="right" valign="top"><a id="ae3a5749bb67df08ad3e50132a572ebb4" name="ae3a5749bb67df08ad3e50132a572ebb4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BFileInterface</b> ()</td></tr>
<tr class="memdesc:ae3a5749bb67df08ad3e50132a572ebb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:ae3a5749bb67df08ad3e50132a572ebb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53370db0faf7171d39aac4f7d3d042b" id="r_ac53370db0faf7171d39aac4f7d3d042b"><td class="memItemLeft" align="right" valign="top"><a id="ac53370db0faf7171d39aac4f7d3d042b" name="ac53370db0faf7171d39aac4f7d3d042b"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~BFileInterface</b> ()</td></tr>
<tr class="memdesc:ac53370db0faf7171d39aac4f7d3d042b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:ac53370db0faf7171d39aac4f7d3d042b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a272325c900fa43d065423d439c9e5888" id="r_a272325c900fa43d065423d439c9e5888"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a272325c900fa43d065423d439c9e5888">DisposeFileFormatCookie</a> (<a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a> cookie)=0</td></tr>
<tr class="memdesc:a272325c900fa43d065423d439c9e5888"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement this method to dispose of a file format supported by your node indexed by <em>cookie</em>.  <br /></td></tr>
<tr class="separator:a272325c900fa43d065423d439c9e5888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a494dd669b5af732e79cfa38d4d8344d7" id="r_a494dd669b5af732e79cfa38d4d8344d7"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a494dd669b5af732e79cfa38d4d8344d7">GetDuration</a> (<a class="el" href="SupportDefs_8h.html#a29bb8e432e460af113ef8938cef96f8b">bigtime_t</a> *_time)=0</td></tr>
<tr class="memdesc:a494dd669b5af732e79cfa38d4d8344d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement this method to fill out the duration in microseconds of the media data contained in the currently referenced file in <em>_time</em>.  <br /></td></tr>
<tr class="separator:a494dd669b5af732e79cfa38d4d8344d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3749ab10d3718f4f041f02e2ad06b8a2" id="r_a3749ab10d3718f4f041f02e2ad06b8a2"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3749ab10d3718f4f041f02e2ad06b8a2">GetNextFileFormat</a> (<a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a> *cookie, media_file_format *_format)=0</td></tr>
<tr class="memdesc:a3749ab10d3718f4f041f02e2ad06b8a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement this method to fill out information about a file format indexed by <em>cookie</em>.  <br /></td></tr>
<tr class="separator:a3749ab10d3718f4f041f02e2ad06b8a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42344ac716ea2d5d23dd663dead04eee" id="r_a42344ac716ea2d5d23dd663dead04eee"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42344ac716ea2d5d23dd663dead04eee">GetRef</a> (<a class="el" href="structentry__ref.html">entry_ref</a> *_ref, char *_mimeType)=0</td></tr>
<tr class="memdesc:a42344ac716ea2d5d23dd663dead04eee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement to set the <code><a class="el" href="structentry__ref.html" title="A filesystem entry represented as a name in a concrete directory.">entry_ref</a></code> and the MIME type of the file referenced by the current node.  <br /></td></tr>
<tr class="separator:a42344ac716ea2d5d23dd663dead04eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cdbc649eeebb7c0e8af66f6adff2515" id="r_a5cdbc649eeebb7c0e8af66f6adff2515"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5cdbc649eeebb7c0e8af66f6adff2515">HandleMessage</a> (<a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a> message, const void *data, size_t size)</td></tr>
<tr class="memdesc:a5cdbc649eeebb7c0e8af66f6adff2515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatches a message to the appropriate <a class="el" href="classBMediaNode.html">BMediaNode</a> hook method given a message received on the control port. Implement this method to handle messages that arrive on your control port.  <br /></td></tr>
<tr class="separator:a5cdbc649eeebb7c0e8af66f6adff2515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbaa70326afe27cce737c96ffedb37c" id="r_acbbaa70326afe27cce737c96ffedb37c"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbbaa70326afe27cce737c96ffedb37c">SetRef</a> (const <a class="el" href="structentry__ref.html">entry_ref</a> &amp;file, bool create, <a class="el" href="SupportDefs_8h.html#a29bb8e432e460af113ef8938cef96f8b">bigtime_t</a> *_time)=0</td></tr>
<tr class="memdesc:acbbaa70326afe27cce737c96ffedb37c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used when an application wants your node to use a specific file.  <br /></td></tr>
<tr class="separator:acbbaa70326afe27cce737c96ffedb37c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfeceb828537ffec026f7a24d9864361" id="r_adfeceb828537ffec026f7a24d9864361"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfeceb828537ffec026f7a24d9864361">SniffRef</a> (const <a class="el" href="structentry__ref.html">entry_ref</a> &amp;file, char *_mimeType, float *_quality)=0</td></tr>
<tr class="memdesc:adfeceb828537ffec026f7a24d9864361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement this method to allow the Media Roster to identify a file format associated with this node.  <br /></td></tr>
<tr class="separator:adfeceb828537ffec026f7a24d9864361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classBMediaNode"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_methods_classBMediaNode')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classBMediaNode.html">BMediaNode</a></td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A node that can read and write data to a file on disk. </p>
<p>You should derive your subclass from <a class="el" href="classBFileInterface.html" title="A node that can read and write data to a file on disk.">BFileInterface</a> so that your application may specify the file that the node will reference. The Media Server will then call upon the node to try to identify and work with files that are hereunto unknown to it.</p>
<p>Your node must also derive from BBufferConsumer or BBufferProducer, in addition to <a class="el" href="classBFileInterface.html" title="A node that can read and write data to a file on disk.">BFileInterface</a>. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a272325c900fa43d065423d439c9e5888" name="a272325c900fa43d065423d439c9e5888"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/DisposeFileFormatCookie" class="dashAnchor">&nbsp;</a><a href="#a272325c900fa43d065423d439c9e5888">&#9670;&#160;</a></span>DisposeFileFormatCookie()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BFileInterface::DisposeFileFormatCookie </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a></td>          <td class="paramname"><span class="paramname"><em>cookie</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implement this method to dispose of a file format supported by your node indexed by <em>cookie</em>. </p>
<p>You are responsible for freeing any data blocks associated with this <em>cookie</em> before returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cookie</td><td>Index of the cookie you wish to dispose of. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a494dd669b5af732e79cfa38d4d8344d7" name="a494dd669b5af732e79cfa38d4d8344d7"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/GetDuration" class="dashAnchor">&nbsp;</a><a href="#a494dd669b5af732e79cfa38d4d8344d7">&#9670;&#160;</a></span>GetDuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a> BFileInterface::GetDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SupportDefs_8h.html#a29bb8e432e460af113ef8938cef96f8b">bigtime_t</a> *</td>          <td class="paramname"><span class="paramname"><em>_time</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implement this method to fill out the duration in microseconds of the media data contained in the currently referenced file in <em>_time</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_time</td><td>The duration parameter to fill out.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status code, typically <code>B_OK</code> on success and <code>B_ERROR</code> or another error code on error. </dd></dl>

</div>
</div>
<a id="a3749ab10d3718f4f041f02e2ad06b8a2" name="a3749ab10d3718f4f041f02e2ad06b8a2"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/GetNextFileFormat" class="dashAnchor">&nbsp;</a><a href="#a3749ab10d3718f4f041f02e2ad06b8a2">&#9670;&#160;</a></span>GetNextFileFormat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a> BFileInterface::GetNextFileFormat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a> *</td>          <td class="paramname"><span class="paramname"><em>cookie</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">media_file_format *</td>          <td class="paramname"><span class="paramname"><em>_format</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implement this method to fill out information about a file format indexed by <em>cookie</em>. </p>
<p>The first time this method is called <em>cookie</em> will be set to 0. In your implementation you should set information about the first file format you support in <em>_format</em> and set <em>cookie</em> to some meaningful non-zero value to track your positing in the list of supported formats, then return <code>B_OK</code>.</p>
<p>On successive calls return successive file format information and update <em>cookie</em> to track your position in the list. Each time you return new information about a file format return <code>B_OK</code>.</p>
<p>Once you run out of formats return <code>B_ERROR</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cookie</td><td>Index of file format to fill out. </td></tr>
    <tr><td class="paramname">_format</td><td>Pointer to a preallocated <code>media_file_format</code> object to fill out.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>B_OK</code> if a file format was filled out for <em>cookie</em>, <code>B_ERROR</code> or an appropriate error code otherwise. </dd></dl>

</div>
</div>
<a id="a42344ac716ea2d5d23dd663dead04eee" name="a42344ac716ea2d5d23dd663dead04eee"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/GetRef" class="dashAnchor">&nbsp;</a><a href="#a42344ac716ea2d5d23dd663dead04eee">&#9670;&#160;</a></span>GetRef()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a> BFileInterface::GetRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structentry__ref.html">entry_ref</a> *</td>          <td class="paramname"><span class="paramname"><em>_ref</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>_mimeType</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implement to set the <code><a class="el" href="structentry__ref.html" title="A filesystem entry represented as a name in a concrete directory.">entry_ref</a></code> and the MIME type of the file referenced by the current node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_ref</td><td>Set to the <code><a class="el" href="structentry__ref.html" title="A filesystem entry represented as a name in a concrete directory.">entry_ref</a></code> of the file. </td></tr>
    <tr><td class="paramname">_mimeType</td><td>Set to the MIME type of the current file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>B_OK</code> on success or an appropriate error code such as <code>B_ERROR</code> on error. </dd></dl>

</div>
</div>
<a id="a5cdbc649eeebb7c0e8af66f6adff2515" name="a5cdbc649eeebb7c0e8af66f6adff2515"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/HandleMessage" class="dashAnchor">&nbsp;</a><a href="#a5cdbc649eeebb7c0e8af66f6adff2515">&#9670;&#160;</a></span>HandleMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a> BFileInterface::HandleMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SupportDefs_8h.html#a87905854573530ba20766196388ad2a1">int32</a></td>          <td class="paramname"><span class="paramname"><em>message</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dispatches a message to the appropriate <a class="el" href="classBMediaNode.html">BMediaNode</a> hook method given a message received on the control port. Implement this method to handle messages that arrive on your control port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The message identifier. </td></tr>
    <tr><td class="paramname">data</td><td>The message data. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the message data in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status code. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">B_OK</td><td>Message was dispatched. </td></tr>
    <tr><td class="paramname">B_ERROR</td><td>There was an error dispatching the message, possibly because it doesn't correspond to a hook function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>BMediaNode::HandleMessage() for details. </dd></dl>

<p>Reimplemented from <a class="el" href="classBMediaNode.html">BMediaNode</a>.</p>

</div>
</div>
<a id="acbbaa70326afe27cce737c96ffedb37c" name="acbbaa70326afe27cce737c96ffedb37c"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/SetRef" class="dashAnchor">&nbsp;</a><a href="#acbbaa70326afe27cce737c96ffedb37c">&#9670;&#160;</a></span>SetRef()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a> BFileInterface::SetRef </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structentry__ref.html">entry_ref</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>create</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SupportDefs_8h.html#a29bb8e432e460af113ef8938cef96f8b">bigtime_t</a> *</td>          <td class="paramname"><span class="paramname"><em>_time</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used when an application wants your node to use a specific file. </p>
<p>The file specified by <em>file</em> may or may not exist.</p>
<p>If create is <code>false</code> you should try to open the existing file, and if successful you should write the running time of the file into <em>_time</em>. If you the file does not exist you should return <code>B_ENTRY_NOT_FOUND</code>.</p>
<p>If <em>create</em> is <code>true</code> you should create a new file, initialize the file for writing, and store 0 in <em>_time</em>. You should overwrite the file if it already exists.</p>
<dl class="section return"><dt>Returns</dt><dd><code>B_OK</code> on success or an appropriate error code such as <code>B_ERROR</code> or <code>B_ENTRY_NOT_FOUND</code> on error. </dd></dl>

</div>
</div>
<a id="adfeceb828537ffec026f7a24d9864361" name="adfeceb828537ffec026f7a24d9864361"></a>
<h2 class="memtitle"><span class="permalink"><a name="//apple_ref/cpp/Method/SniffRef" class="dashAnchor">&nbsp;</a><a href="#adfeceb828537ffec026f7a24d9864361">&#9670;&#160;</a></span>SniffRef()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="SupportDefs_8h.html#ab6735558965995709a53691ae913c81b">status_t</a> BFileInterface::SniffRef </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structentry__ref.html">entry_ref</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>_mimeType</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>_quality</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implement this method to allow the Media Roster to identify a file format associated with this node. </p>
<p>If you can handle the format, set <em>_mimeType</em> to the MIME type of the file format and set <em>_quality</em> to indicate how well you can process the file.</p>
<p>A <em>_quality</em> of 0.0 means that you can't handle the file format at all and an <em>_quality</em> of 1.0 means you have total control over the file format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The file being sniffed. </td></tr>
    <tr><td class="paramname">_mimeType</td><td>Fill this out with the appropriate MIME type. </td></tr>
    <tr><td class="paramname">_quality</td><td>How well you are able to handle the file format from 0.0 to 1.0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>B_OK</code> if you can identify the file's contents, otherwise return an appropriate error code. If you can't handle the file format at all, you should return <code>B_MEDIA_NO_HANDLER</code>. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
  <hr class="footer"/><address class="footer"><small>
    The Haiku Book pre-R1 - BFileInterface Class Reference<br />
    Generated on Sat May 24 2025 23:12:17 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.12.0
  </small></address>
</body>
</html>
